var j=Object.create;var S=Object.defineProperty,H=Object.defineProperties,M=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&E(e,r,t[r]);if(b)for(var r of b(t))q.call(t,r)&&E(e,r,t[r]);return e},P=(e,t)=>H(e,J(t)),$=e=>S(e,"__esModule",{value:!0});var x=(e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&b)for(var n of b(e))t.indexOf(n)<0&&q.call(e,n)&&(r[n]=e[n]);return r};var X=(e,t)=>{for(var r in t)S(e,r,{get:t[r],enumerable:!0})},R=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Y(t))!v.call(e,s)&&(r||s!=="default")&&S(e,s,{get:()=>t[s],enumerable:!(n=M(t,s))||n.enumerable});return e},G=(e,t)=>R($(S(e!=null?j(D(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Q=(e=>(t,r)=>e&&e.get(t)||(r=R($({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var h=(e,t,r)=>new Promise((n,s)=>{var a=u=>{try{i(r.next(u))}catch(c){s(c)}},o=u=>{try{i(r.throw(u))}catch(c){s(c)}},i=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,o);i((r=r.apply(e,t)).next())});var me={};X(me,{ErrorMessage:()=>re,Field:()=>te,FieldHOC:()=>ne,LessForm:()=>se,check:()=>U,throwError:()=>W,useField:()=>y,useFieldByContext:()=>V,useFields:()=>ie,useFieldsByContext:()=>z,useForm:()=>ue,validateTiny:()=>k});var m=G(require("react"));var F=require("react"),B=require("react-ob");var w=require("react"),p=(0,w.createContext)(void 0);var U={string:e=>I("string",e),array:e=>I("array",e),bool:e=>I("boolean",e),object:e=>I("object",e),number:e=>I("number",e)};function I(e,t){let r={__schemaItem:{errors:{matches:[]},matches:[]},required:n=>(r.__schemaItem.errors.required=n||"Need required",r.__schemaItem.requred=!0,r),matches:(n,s)=>(r.__schemaItem.errors.matches.push(s||"Matches error: "+String(n)),r.__schemaItem.matches.push(n),r),len:(n,s)=>(r.__schemaItem.errors.len=s||"Length no equal: "+n,r.__schemaItem.len=n,r),equal:(n,s)=>(r.__schemaItem.errors.equal=s||"Not equal the val",r.__schemaItem.equal=n,r),equalByKey:(n,s)=>(r.__schemaItem.errors.equalByKey=s||"Not equal by: "+n,r.__schemaItem.equalByKey=n,r),min:(n,s)=>(r.__schemaItem.errors.min=s||"Need min: "+n,r.__schemaItem.min=n,r),max:(n,s)=>(r.__schemaItem.errors.max=s||"Need max: "+n,r.__schemaItem.max=n,r),pick:(n,s)=>(r.__schemaItem.errors.pick=s||"Need in list: "+n,r.__schemaItem.pick=new Set(n),r),password:n=>(r.matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/,n),r),passwordStrong:n=>(r.matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,n),r),email:n=>(r.matches(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,n),r),chinaPhone:n=>(r.matches(/^(?:(?:\+|00)86)?1\d{10}$/,n),r),chinaId:n=>(r.matches(/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/,n),r),url:n=>(r.matches(/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,n),r),bank:n=>(r.matches(/^[1-9]\d{9,29}$/,n),r),chinaName:n=>(r.matches(/^(?:[\u4e00-\u9fa5·]{2,16})$/,n),r),chinaCar:n=>(r.matches(/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z][A-HJ-NP-Z0-9]{4,5}[A-HJ-NP-Z0-9挂学警港澳]$/,n),r),hkId:n=>(r.matches(/^[a-zA-Z]\d{6}\([\dA]\)$/,n),r),number:n=>(r.matches(/^\d+$/,n),r),username:n=>(r.matches(/^[a-zA-Z0-9_-]{4,16}$/,n),r),letterOrNumber:n=>(r.matches(/^[A-Za-z0-9]+$/,n),r),letterAndNumber:n=>(r.matches(/^(?=.*[a-zA-Z])(?=.*\d).+$/,n),r),letter:n=>(r.matches(/^[a-zA-Z]+$/,n),r),uuid:n=>(r.matches(/^[a-f\d]{4}(?:[a-f\d]{4}-){4}[a-f\d]{12}$/i,n),r),integer:n=>(r.matches(/^-?[1-9]\d*$/,n),r),date:n=>(r.matches(/^\d{4}([/:-\S])(1[0-2]|0?[1-9])\1(0?[1-9]|[1-2]\d|30|31) (?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/,n),r)};return r.__schemaItem.type=e,r.__schemaItem.errors.type=t||"Type not "+e,r}var _={type:(e,t)=>t===void 0||t==="array"&&Array.isArray(e)?!0:typeof e===t,min:(e,t)=>t===void 0?!0:typeof e=="number"?e>t:e&&e.length?e.length>t:!1,max:(e,t)=>t===void 0?!0:typeof e=="number"?e<t:e&&e.length?e.length<t:!1,pick:(e,t)=>t===void 0?!0:!(!e||Array.isArray(e)&&e.find(r=>!t.has(r))||!t.has(e))};function k(e,t,r){let n={},s=a=>{if(!e[a])return"";let o=e[a].__schemaItem,i=t[a];if(!_.type(i,o.type))return o.errors.type;if(o.requred&&!i)return o.errors.required;if(!_.min(i,o.min))return o.errors.min;if(!_.max(i,o.max))return o.errors.max;if(o.len&&typeof i=="string"&&i.length!==o.len)return o.errors.len;if(o.equal&&i!==o.equal)return o.errors.equal;if(o.equalByKey&&i!==t[o.equalByKey])return o.errors.equalByKey;if(!_.pick(i,o.pick))return o.errors.pick;if(o.matches.length){for(let u=0;u<o.matches.length;u++)if(!o.matches[u].test(i))return o.errors.matches[u]}return""};if(r)n[r]=s(r);else{let a=Object.keys(e);for(let o=0;o<a.length;o++){let i=a[o],u=s(i);if(n[i]=u,u)break}}return n}function W(e){let t=Object.keys(e),r="";for(let n=0;n<t.length;n++)if(t[n]){r=t[n];break}if(r)throw new Error(r)}var N={abortEarly:!1};function O(e,t,r){return h(this,null,function*(){let n={};if(r)try{yield e.validateAt(r,t,N)}catch(s){s&&s.errors&&s.errors[0]&&(n[r]=s.errors[0])}else{let s=Object.keys(t);for(let a of s)try{yield e.validateAt(a,t,N)}catch(o){o&&o.errors&&o.errors[0]&&(n[a]=o.errors[0])}}return n})}function A(e,t){if(e.entryValidateAll)return t;let r={};return Object.keys(e.touched).forEach(n=>{if(e.touched[n]){let s=t[n];s!==void 0&&(r[n]=s)}}),r}function T(e,t){return h(this,null,function*(){if(e.validate){let r=yield Promise.resolve(e.validate(e.val,t));Object.assign(e.errors,A(e,r))}else if(e.validateSchema)if(e.validateSchema._blacklist){let r=yield O(e.validateSchema,e.val,t);Object.assign(e.errors,A(e,r))}else{let r=k(e.validateSchema,e.val,t);Object.assign(e.errors,A(e,r))}e.next()})}var ee={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function V(e,t,r){if(!e)return ee;let n=(0,B.useObserver)(e,a=>r?r=="error"?[e.errors[t]]:[a[t]]:[a[t],e.errors[t]]);(0,F.useEffect)(()=>{e.val[t]&&s.onChange(e.val[t])},[]);let s={name:t,value:n[t]==null?"":n[t],error:typeof e.errors[t]=="undefined"?"":e.errors[t],onBlur:a=>{a.persist&&a.persist(),e.touched[t]||(e.touched[t]=!0,s.onChange(n[t]))},onChange:a=>{e.touched[t]||(e.touched[t]=!0);let o=typeof a,i;if(o==="undefined")i="";else if(o==="object"&&a.currentTarget){let f=a.currentTarget.type;if(f==="checkbox"||f==="radio")i=!!a.currentTarget.checked;else if(a.currentTarget.multiple){let l=a.currentTarget.options,g=[];for(var u=0,c=l.length;u<c;u++)l[u].selected&&g.push(l[u].value);i=g}else i=a.currentTarget.value}else i=a;e.val[t]=i,e.handleChange&&(e.val=e.handleChange(e.val,t)),T(e,t)}};return s}function y(e,t){let r=(0,F.useContext)(p);return V(r,e,t)}function re({name:e}){let t=y(e,"error");return m.createElement(m.Fragment,null,t.error)}function te(n){var s=n,{name:e,children:t}=s,r=x(s,["name","children"]);let a=y(e);return m.createElement("input",d({name:e,value:a.value,onChange:a.onChange,onBlur:a.onBlur},r))}function ne(e,t){return function(a){var o=a,{name:n}=o,s=x(o,["name"]);if(n){let i=y(n,t);return m.createElement(e,d(d({},i),s))}return m.createElement(e,d({},s))}}var oe=p.Provider;function se(e){return m.createElement(oe,d({},e))}var Z=require("react"),L=require("react-ob");var ae={names:[],values:{},errors:{},onChange:(e,t)=>{},contentValues:()=>{}};function z(e,t,r){if(!e)return ae;(0,L.useObserver)(e,a=>{let o=[];return r?r=="error"?(t.forEach(i=>{o.push(e.errors[i])}),o):(t.forEach(i=>{o.push(a[i])}),o):(t.forEach(i=>{o.push(a[i]),o.push(e.errors[i])}),o)});let n={},s={};return t.forEach(a=>{n[a]=e.val[a],s[a]=e.errors[a]||""}),{names:t,values:n,errors:s,onChange:(a,o)=>{e.val[a]=o,e.next()},contentValues:e.contentValues}}function ie(e,t){let r=(0,Z.useContext)(p);return z(r,e,t)}var C=require("react"),K=require("react-ob");function ue({initialValues:e,initErrors:t,validate:r,entryValidateAll:n,validateSchema:s,handleChange:a}){let o=(0,C.useRef)((0,K.CreateObserver)(e));return(0,C.useEffect)(()=>{n&&T(o.current)},[]),(0,C.useMemo)(()=>{let i=new Set(Object.keys(e)),u={};return i.forEach(c=>{u[c]=!1}),o.current=P(d({},o.current),{validate:r,errors:t||{},fields:i,touched:u,entryCheckAll:!!n,validateSchema:s,validateAll:()=>h(this,null,function*(){let c=o.current.fields;c.forEach(l=>{o.current.touched[l]=!0}),yield T(o.current);let f="";return c.forEach(l=>{!f&&o.current.errors[l]&&(f=o.current.errors[l])}),f}),validateKey:c=>h(this,null,function*(){let f=o.current.fields;f.forEach(g=>{o.current.touched[g]=!0}),yield T(o.current,c);let l="";return f.forEach(g=>{!l&&o.current.errors[g]&&(l=o.current.errors[g])}),l}),contentValues:()=>{let c=o.current.fields,f={};return c.forEach(l=>{f[l]=o.current.val[l]}),f},handleChange:a}),o.current},[])}module.exports=Q(me);
