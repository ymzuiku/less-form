var D=Object.create;var h=Object.defineProperty,_=Object.defineProperties,q=Object.getOwnPropertyDescriptor,z=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var O=(e,r,o)=>r in e?h(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,d=(e,r)=>{for(var o in r||(r={}))k.call(r,o)&&O(e,o,r[o]);if(T)for(var o of T(r))P.call(r,o)&&O(e,o,r[o]);return e},L=(e,r)=>_(e,z(r)),R=e=>h(e,"__esModule",{value:!0});var v=(e,r)=>{var o={};for(var n in e)k.call(e,n)&&r.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&T)for(var n of T(e))r.indexOf(n)<0&&P.call(e,n)&&(o[n]=e[n]);return o};var Q=(e,r)=>{for(var o in r)h(e,o,{get:r[o],enumerable:!0})},j=(e,r,o,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of G(r))!k.call(e,s)&&(o||s!=="default")&&h(e,s,{get:()=>r[s],enumerable:!(n=q(r,s))||n.enumerable});return e},U=(e,r)=>j(R(h(e!=null?D(J(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),W=(e=>(r,o)=>e&&e.get(r)||(o=j(R({}),r,1),e&&e.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var y=(e,r,o)=>new Promise((n,s)=>{var t=a=>{try{u(o.next(a))}catch(c){s(c)}},i=a=>{try{u(o.throw(a))}catch(c){s(c)}},u=a=>a.done?n(a.value):Promise.resolve(a.value).then(t,i);u((o=o.apply(e,r)).next())});var ae={};Q(ae,{ErrorMessage:()=>Z,Field:()=>$,FieldHOC:()=>ee,LessForm:()=>oe,useField:()=>m,useFieldByContext:()=>V,useFields:()=>ne,useFieldsByContext:()=>I,useForm:()=>se});var l=U(require("react"));var F=require("react"),H=require("react-ob");var w=require("react"),g=(0,w.createContext)(void 0);var B={abortEarly:!1};function M(e){return!!e._blacklist}function A(e,r,o){return y(this,null,function*(){let n={};if(o)try{yield e.validateAt(o,r,B)}catch(s){s&&s.errors&&s.errors[0]&&(n[o]=s.errors[0])}else{let s=Object.keys(r);for(let t of s)try{yield e.validateAt(t,r,B)}catch(i){i&&i.errors&&i.errors[0]&&(n[t]=i.errors[0])}}return n})}function E(e,r){let o={};return Object.keys(e.touched).forEach(n=>{if(e.touched[n]){let s=r[n];s!==void 0&&(o[n]=s)}}),o}function C(e,r){return y(this,null,function*(){if(e.validate){let o=yield Promise.resolve(e.validate(e.val,r));Object.assign(e.errors,E(e,o))}else if(e.validateSchema){if(M(e.validateSchema)){let o=yield A(e.validateSchema,e.val,r);Object.assign(e.errors,E(e,o))}else if(e.validateSchema.isSoke){let o=e.validateSchema.validate(e.val,r);Object.assign(e.errors,E(e,o))}}e.next()})}var X={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function V(e,r,o){if(!e)return X;let n=(0,H.useObserver)(e,t=>o?o=="error"?[e.errors[r]]:[t[r]]:[t[r],e.errors[r]]);(0,F.useEffect)(()=>{e.val[r]&&s.onChange(e.val[r])},[]);let s={name:r,value:n[r]==null?"":n[r],error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:t=>{t.persist&&t.persist(),e.touched[r]||(e.touched[r]=!0,s.onChange(n[r]))},onChange:t=>{e.touched[r]||(e.touched[r]=!0);let i=typeof t,u;if(i==="undefined")u="";else if(i==="object"&&(t.currentTarget||t.target)){let f=t.currentTarget||t.target,p=f.type;if(p==="checkbox"||p==="radio")u=!!f.checked;else if(f.multiple){let S=f.options,b=[];for(var a=0,c=S.length;a<c;a++)S[a].selected&&b.push(S[a].value);u=b}else u=f.value}else u=t;e.val[r]=u,e.handleChange&&(e.val=e.handleChange(e.val,r)),C(e,r)}};return s}function m(e,r){let o=(0,F.useContext)(g);return V(o,e,r)}function Z({name:e}){let r=m(e,"error");return l.createElement(l.Fragment,null,r.error)}function $(n){var s=n,{name:e,children:r}=s,o=v(s,["name","children"]);let t=m(e);return l.createElement("input",d({name:e,value:t.value,onChange:t.onChange,onBlur:t.onBlur},o))}function ee(e,r){return function(t){var i=t,{name:n}=i,s=v(i,["name"]);if(n){let u=m(n,r);return l.createElement(e,d(d({},u),s))}return l.createElement(e,d({},s))}}var re=g.Provider;function oe(e){return l.createElement(re,d({},e))}var K=require("react"),Y=require("react-ob");var te={names:[],values:{},errors:{},onChange:(e,r)=>{},keepValues:e=>{}};function I(e,r,o){if(!e)return te;(0,Y.useObserver)(e,t=>{let i=[];return o?o=="error"?(r.forEach(u=>{i.push(e.errors[u])}),i):(r.forEach(u=>{i.push(t[u])}),i):(r.forEach(u=>{i.push(t[u]),i.push(e.errors[u])}),i)});let n={},s={};return r.forEach(t=>{n[t]=e.val[t],s[t]=e.errors[t]||""}),{names:r,values:n,errors:s,onChange:(t,i)=>{e.val[t]=i,e.next()},keepValues:e.keepValues}}function ne(e,r){let o=(0,K.useContext)(g);return I(o,e,r)}var x=require("react"),N=require("react-ob");function se({initialValues:e,initErrors:r,validate:o,validateSchema:n,handleChange:s}){let t=(0,x.useRef)((0,N.CreateObserver)(e));return(0,x.useMemo)(()=>{let i=Object.keys(e),u={};return i.forEach(a=>{u[a]=!1}),t.current=L(d({},t.current),{validate:o,errors:r||{},fields:i,touched:u,validateSchema:n,findFirstError:()=>{let a=t.current.validateSchema;if(a.isSoke)return a.firstError(t.current.errors);let c=t.current.fields,f="";return c.forEach(p=>{!f&&t.current.errors[p]&&(f=t.current.errors[p])}),f},validateAll:()=>y(this,null,function*(){let a=t.current.validateSchema;return a.isSoke?a.schemaKeys.forEach(c=>{t.current.touched[c]=!0}):t.current.fields.forEach(f=>{t.current.touched[f]=!0}),yield C(t.current),t.current.findFirstError()}),validateKey:a=>y(this,null,function*(){return t.current.touched[a]=!0,yield C(t.current,a),t.current.errors[a]}),keepValues:a=>{let c=a||t.current.fields,f={};return c.forEach(p=>{f[p]=t.current.val[p]}),f},handleChange:s}),t.current},[])}module.exports=W(ae);
