var N=Object.create;var C=Object.defineProperty,_=Object.defineProperties,q=Object.getOwnPropertyDescriptor,z=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var L=(r,e,o)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,d=(r,e)=>{for(var o in e||(e={}))k.call(e,o)&&L(r,o,e[o]);if(v)for(var o of v(e))b.call(e,o)&&L(r,o,e[o]);return r},O=(r,e)=>_(r,z(e)),R=r=>C(r,"__esModule",{value:!0});var g=(r,e)=>{var o={};for(var n in r)k.call(r,n)&&e.indexOf(n)<0&&(o[n]=r[n]);if(r!=null&&v)for(var n of v(r))e.indexOf(n)<0&&b.call(r,n)&&(o[n]=r[n]);return o};var Q=(r,e)=>{for(var o in e)C(r,o,{get:e[o],enumerable:!0})},j=(r,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of G(e))!k.call(r,s)&&(o||s!=="default")&&C(r,s,{get:()=>e[s],enumerable:!(n=q(e,s))||n.enumerable});return r},U=(r,e)=>j(R(C(r!=null?N(J(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),W=(r=>(e,o)=>r&&r.get(e)||(o=j(R({}),e,1),r&&r.set(e,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var y=(r,e,o)=>new Promise((n,s)=>{var t=i=>{try{u(o.next(i))}catch(c){s(c)}},a=i=>{try{u(o.throw(i))}catch(c){s(c)}},u=i=>i.done?n(i.value):Promise.resolve(i.value).then(t,a);u((o=o.apply(r,e)).next())});var ar={};Q(ar,{ErrorMessage:()=>Z,Field:()=>$,FieldHOC:()=>rr,LessForm:()=>or,useField:()=>m,useFieldByContext:()=>V,useFields:()=>nr,useFieldsByContext:()=>I,useForm:()=>sr});var f=U(require("react"));var F=require("react"),H=require("react-ob");var w=require("react"),h=(0,w.createContext)(void 0);var B={abortEarly:!1};function M(r){return!!r._blacklist}function A(r,e,o){return y(this,null,function*(){let n={};if(o)try{yield r.validateAt(o,e,B)}catch(s){s&&s.errors&&s.errors[0]&&(n[o]=s.errors[0])}else{let s=Object.keys(e);for(let t of s)try{yield r.validateAt(t,e,B)}catch(a){a&&a.errors&&a.errors[0]&&(n[t]=a.errors[0])}}return n})}function P(r,e){let o={};return Object.keys(r.touched).forEach(n=>{if(r.touched[n]){let s=e[n];s!==void 0&&(o[n]=s)}}),o}function T(r,e){return y(this,null,function*(){if(r.validate){let o=yield Promise.resolve(r.validate(r.val,e));Object.assign(r.errors,P(r,o))}else if(r.validateSchema){if(M(r.validateSchema)){let o=yield A(r.validateSchema,r.val,e);Object.assign(r.errors,P(r,o))}else if(r.validateSchema.isSoke){let o=r.validateSchema.validate(r.val,e);Object.assign(r.errors,P(r,o))}}r.next()})}var X={name:"",value:"",error:"",onChange:r=>{},onBlur:r=>{}};function V(r,e,o){if(!r)return X;let n=(0,H.useObserver)(r,t=>o?o=="error"?[r.errors[e]]:[t[e]]:[t[e],r.errors[e]]);(0,F.useEffect)(()=>{r.val[e]&&s.onChange(r.val[e])},[]);let s={name:e,value:n[e]==null?"":n[e],error:typeof r.errors[e]=="undefined"?"":r.errors[e],onBlur:t=>{t.persist&&t.persist(),r.touched[e]||(r.touched[e]=!0,s.onChange(n[e]))},onChange:t=>{r.touched[e]||(r.touched[e]=!0);let a=typeof t,u;if(a==="undefined")u="";else if(a==="object"&&(t.currentTarget||t.target)){let l=t.currentTarget||t.target,p=l.type;if(p==="checkbox"||p==="radio")u=!!l.checked;else if(l.multiple){let S=l.options,E=[];for(var i=0,c=S.length;i<c;i++)S[i].selected&&E.push(S[i].value);u=E}else u=l.value}else u=t;r.val[e]=u,r.handleChange&&(r.val=r.handleChange(r.val,e)),T(r,e)}};return s}function m(r,e){let o=(0,F.useContext)(h);return V(o,r,e)}function Z({name:r}){let e=m(r,"error");return f.createElement(f.Fragment,null,e.error)}function $(n){var s=n,{name:r,children:e}=s,o=g(s,["name","children"]);let t=m(r);return f.createElement("input",d({name:r,value:t.value,onChange:t.onChange,onBlur:t.onBlur},o))}function rr(r,e){return function(t){var a=t,{name:n}=a,s=g(a,["name"]);if(n){let u=m(n,e);return f.createElement(r,d(d({},u),s))}return f.createElement(r,d({},s))}}var er=h.Provider;function or(s){var t=s,{children:r,onSubmit:e,value:o}=t,n=g(t,["children","onSubmit","value"]);return f.createElement(er,{value:o},f.createElement("form",d({onSubmit:a=>{a.preventDefault(),e&&e(a)}},n),r))}var K=require("react"),Y=require("react-ob");var tr={names:[],values:{},errors:{},onChange:(r,e)=>{},keepValues:r=>{}};function I(r,e,o){if(!r)return tr;(0,Y.useObserver)(r,t=>{let a=[];return o?o=="error"?(e.forEach(u=>{a.push(r.errors[u])}),a):(e.forEach(u=>{a.push(t[u])}),a):(e.forEach(u=>{a.push(t[u]),a.push(r.errors[u])}),a)});let n={},s={};return e.forEach(t=>{n[t]=r.val[t],s[t]=r.errors[t]||""}),{names:e,values:n,errors:s,onChange:(t,a)=>{r.val[t]=a,r.next()},keepValues:r.keepValues}}function nr(r,e){let o=(0,K.useContext)(h);return I(o,r,e)}var x=require("react"),D=require("react-ob");function sr({initialValues:r,initErrors:e,validate:o,validateSchema:n,handleChange:s}){let t=(0,x.useRef)((0,D.CreateObserver)(r));return(0,x.useMemo)(()=>{let a=Object.keys(r),u={};return a.forEach(i=>{u[i]=!1}),t.current=O(d({},t.current),{validate:o,errors:e||{},fields:a,touched:u,validateSchema:n,findFirstError:()=>{let i=t.current.validateSchema;if(i.isSoke)return i.firstError(t.current.errors);let c=t.current.fields,l="";return c.forEach(p=>{!l&&t.current.errors[p]&&(l=t.current.errors[p])}),l},validateAll:()=>y(this,null,function*(){let i=t.current.validateSchema;return i.isSoke?i.schemaKeys.forEach(c=>{t.current.touched[c]=!0}):t.current.fields.forEach(l=>{t.current.touched[l]=!0}),yield T(t.current),t.current.findFirstError()}),validateKey:i=>y(this,null,function*(){return t.current.touched[i]=!0,yield T(t.current,i),t.current.errors[i]}),keepValues:i=>{let c=i||t.current.fields,l={};return c.forEach(p=>{l[p]=t.current.val[p]}),l},handleChange:s}),t.current},[])}module.exports=W(ar);
