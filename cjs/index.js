var D=Object.create;var T=Object.defineProperty,_=Object.defineProperties,q=Object.getOwnPropertyDescriptor,z=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var L=(e,r,t)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,p=(e,r)=>{for(var t in r||(r={}))S.call(r,t)&&L(e,t,r[t]);if(F)for(var t of F(r))P.call(r,t)&&L(e,t,r[t]);return e},O=(e,r)=>_(e,z(r)),A=e=>T(e,"__esModule",{value:!0});var x=(e,r)=>{var t={};for(var n in e)S.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&F)for(var n of F(e))r.indexOf(n)<0&&P.call(e,n)&&(t[n]=e[n]);return t};var Q=(e,r)=>{for(var t in r)T(e,t,{get:r[t],enumerable:!0})},R=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of G(r))!S.call(e,a)&&(t||a!=="default")&&T(e,a,{get:()=>r[a],enumerable:!(n=q(r,a))||n.enumerable});return e},U=(e,r)=>R(A(T(e!=null?D(J(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),W=(e=>(r,t)=>e&&e.get(r)||(t=R(A({}),r,1),e&&e.set(r,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var m=(e,r,t)=>new Promise((n,a)=>{var s=f=>{try{i(t.next(f))}catch(l){a(l)}},o=f=>{try{i(t.throw(f))}catch(l){a(l)}},i=f=>f.done?n(f.value):Promise.resolve(f.value).then(s,o);i((t=t.apply(e,r)).next())});var ae={};Q(ae,{ErrorMessage:()=>Z,Field:()=>$,FieldHOC:()=>ee,LessForm:()=>te,useField:()=>g,useFieldByContext:()=>H,useFields:()=>ne,useFieldsByContext:()=>I,useForm:()=>se});var u=U(require("react"));var k=require("react"),V=require("react-ob");var j=require("react"),h=(0,j.createContext)(void 0);var w={abortEarly:!1};function B(e){return!!e._blacklist}function M(e,r,t){return m(this,null,function*(){let n={};if(t)try{yield e.validateAt(t,r,w)}catch(a){a&&a.errors&&a.errors[0]&&(n[t]=a.errors[0])}else{let a=Object.keys(r);for(let s of a)try{yield e.validateAt(s,r,w)}catch(o){o&&o.errors&&o.errors[0]&&(n[s]=o.errors[0])}}return n})}function E(e,r){if(e.entryValidateAll)return r;let t={};return Object.keys(e.touched).forEach(n=>{if(e.touched[n]){let a=r[n];a!==void 0&&(t[n]=a)}}),t}function v(e,r){return m(this,null,function*(){if(e.validate){let t=yield Promise.resolve(e.validate(e.val,r));Object.assign(e.errors,E(e,t))}else if(e.validateSchema){if(B(e.validateSchema)){let t=yield M(e.validateSchema,e.val,r);Object.assign(e.errors,E(e,t))}else if(e.validateSchema.isSoke){let t=e.validateSchema.validate(e.val,r);Object.assign(e.errors,E(e,t))}}e.next()})}var X={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function H(e,r,t){if(!e)return X;let n=(0,V.useObserver)(e,s=>t?t=="error"?[e.errors[r]]:[s[r]]:[s[r],e.errors[r]]);(0,k.useEffect)(()=>{e.val[r]&&a.onChange(e.val[r])},[]);let a={name:r,value:n[r]==null?"":n[r],error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:s=>{s.persist&&s.persist(),e.touched[r]||(e.touched[r]=!0,a.onChange(n[r]))},onChange:s=>{e.touched[r]||(e.touched[r]=!0);let o=typeof s,i;if(o==="undefined")i="";else if(o==="object"&&(s.currentTarget||s.target)){let c=s.currentTarget||s.target,d=c.type;if(d==="checkbox"||d==="radio")i=!!c.checked;else if(c.multiple){let y=c.options,b=[];for(var f=0,l=y.length;f<l;f++)y[f].selected&&b.push(y[f].value);i=b}else i=c.value}else i=s;e.val[r]=i,e.handleChange&&(e.val=e.handleChange(e.val,r)),v(e,r)}};return a}function g(e,r){let t=(0,k.useContext)(h);return H(t,e,r)}function Z({name:e}){let r=g(e,"error");return u.createElement(u.Fragment,null,r.error)}function $(n){var a=n,{name:e,children:r}=a,t=x(a,["name","children"]);let s=g(e);return u.createElement("input",p({name:e,value:s.value,onChange:s.onChange,onBlur:s.onBlur},t))}function ee(e,r){return function(s){var o=s,{name:n}=o,a=x(o,["name"]);if(n){let i=g(n,r);return u.createElement(e,p(p({},i),a))}return u.createElement(e,p({},a))}}var re=h.Provider;function te(e){return u.createElement(re,p({},e))}var K=require("react"),Y=require("react-ob");var oe={names:[],values:{},errors:{},onChange:(e,r)=>{},keepValues:e=>{}};function I(e,r,t){if(!e)return oe;(0,Y.useObserver)(e,s=>{let o=[];return t?t=="error"?(r.forEach(i=>{o.push(e.errors[i])}),o):(r.forEach(i=>{o.push(s[i])}),o):(r.forEach(i=>{o.push(s[i]),o.push(e.errors[i])}),o)});let n={},a={};return r.forEach(s=>{n[s]=e.val[s],a[s]=e.errors[s]||""}),{names:r,values:n,errors:a,onChange:(s,o)=>{e.val[s]=o,e.next()},keepValues:e.keepValues}}function ne(e,r){let t=(0,K.useContext)(h);return I(t,e,r)}var C=require("react"),N=require("react-ob");function se({initialValues:e,initErrors:r,validate:t,entryValidateAll:n,validateSchema:a,handleChange:s}){let o=(0,C.useRef)((0,N.CreateObserver)(e));return(0,C.useEffect)(()=>{n&&o.current.validateAll&&o.current.validateAll()},[]),(0,C.useMemo)(()=>{let i=Object.keys(e),f={};return i.forEach(l=>{f[l]=!1}),o.current=O(p({},o.current),{validate:t,errors:r||{},fields:i,touched:f,entryCheckAll:!!n,validateSchema:a,findFirstError:()=>{let l=o.current.validateSchema;if(l.isSoke)return l.firstError(o.current.errors);let c=o.current.fields,d="";return c.forEach(y=>{!d&&o.current.errors[y]&&(d=o.current.errors[y])}),d},validateAll:()=>m(this,null,function*(){let l=o.current.validateSchema;return l.isSoke?l.schemaKeys.forEach(c=>{o.current.touched[c]=!0}):o.current.fields.forEach(d=>{o.current.touched[d]=!0}),yield v(o.current),o.current.findFirstError()}),validateKey:l=>m(this,null,function*(){return o.current.touched[l]=!0,yield v(o.current,l),o.current.findFirstError()}),keepValues:l=>{let c=l||o.current.fields,d={};return c.forEach(y=>{d[y]=o.current.val[y]}),d},handleChange:s}),o.current},[])}module.exports=W(ae);
