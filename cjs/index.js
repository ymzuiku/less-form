var _=Object.create;var T=Object.defineProperty,q=Object.defineProperties,z=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var O=(r,e,o)=>e in r?T(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,p=(r,e)=>{for(var o in e||(e={}))S.call(e,o)&&O(r,o,e[o]);if(C)for(var o of C(e))E.call(e,o)&&O(r,o,e[o]);return r},L=(r,e)=>q(r,G(e)),R=r=>T(r,"__esModule",{value:!0});var v=(r,e)=>{var o={};for(var n in r)S.call(r,n)&&e.indexOf(n)<0&&(o[n]=r[n]);if(r!=null&&C)for(var n of C(r))e.indexOf(n)<0&&E.call(r,n)&&(o[n]=r[n]);return o};var Q=(r,e)=>{for(var o in e)T(r,o,{get:e[o],enumerable:!0})},w=(r,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of I(e))!S.call(r,s)&&(o||s!=="default")&&T(r,s,{get:()=>e[s],enumerable:!(n=z(e,s))||n.enumerable});return r},U=(r,e)=>w(R(T(r!=null?_(J(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),W=(r=>(e,o)=>r&&r.get(e)||(o=w(R({}),e,1),r&&r.set(e,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var y=(r,e,o)=>new Promise((n,s)=>{var t=a=>{try{f(o.next(a))}catch(d){s(d)}},i=a=>{try{f(o.throw(a))}catch(d){s(d)}},f=a=>a.done?n(a.value):Promise.resolve(a.value).then(t,i);f((o=o.apply(r,e)).next())});var ar={};Q(ar,{ErrorMessage:()=>Z,Field:()=>$,FieldHOC:()=>rr,LessForm:()=>or,useField:()=>m,useFieldByContext:()=>K,useFields:()=>nr,useFieldsByContext:()=>D,useForm:()=>sr});var u=U(require("react"));var F=require("react"),H=require("react-ob");var j=require("react"),g=(0,j.createContext)(void 0);var V={abortEarly:!1};function A(r){return!!r._blacklist}function B(r,e,o){return y(this,null,function*(){let n={};if(o)try{yield r.validateAt(o,e,V)}catch(s){s&&s.errors&&s.errors[0]&&(n[o]=s.errors[0])}else{let s=Object.keys(e);for(let t of s)try{yield r.validateAt(t,e,V)}catch(i){i&&i.errors&&i.errors[0]&&(n[t]=i.errors[0])}}return n})}function P(r,e){let o={};return Object.keys(r.touched).forEach(n=>{if(r.touched[n]){let s=e[n];s!==void 0&&(o[n]=s)}}),o}function h(r,e){return y(this,null,function*(){if(r.validate){let o=yield Promise.resolve(r.validate(r.val,e));Object.assign(r.errors,P(r,o))}else if(r.validateSchema){if(A(r.validateSchema)){let o=yield B(r.validateSchema,r.val,e);Object.assign(r.errors,P(r,o))}else if(r.validateSchema.isSoke){let o=r.validateSchema.validate(r.val,e);Object.assign(r.errors,P(r,o))}}r.next()})}var X={name:"",value:"",error:"",onChange:r=>{},onBlur:r=>{}};function K(r,e,o){if(!r)return X;let n=(0,H.useObserver)(r,t=>o?o=="error"?[r.errors[e]]:[t[e]]:[t[e],r.errors[e]]);(0,F.useEffect)(()=>{r.val[e]&&s.onChange(r.val[e])},[]);let s={name:e,value:n[e]==null?"":n[e],error:typeof r.errors[e]=="undefined"?"":r.errors[e],onBlur:t=>{t.persist&&t.persist(),r.touched[e]||(r.touched[e]=!0,s.onChange(n[e]))},onChange:t=>{r.touched[e]||(r.touched[e]=!0);let i=typeof t,f;if(i==="undefined")f="";else if(i==="object"&&(t.currentTarget||t.target)){let l=t.currentTarget||t.target,c=l.type;if(c==="checkbox"||c==="radio")f=!!l.checked;else if(l.multiple){let k=l.options,b=[];for(var a=0,d=k.length;a<d;a++)k[a].selected&&b.push(k[a].value);f=b}else f=l.value}else f=t;r.val[e]=f,r.handleChange&&(r.val=r.handleChange(r.val,e)),h(r,e)}};return s}function m(r,e){let o=(0,F.useContext)(g);return K(o,r,e)}function Z({name:r}){let e=m(r,"error");return u.createElement(u.Fragment,null,e.error)}function $({name:r,children:e,loadType:o}){let n=m(r,o);return e(n)}function rr(r){return function(i){var f=i,{name:o,loadType:n,onChange:s}=f,t=v(f,["name","loadType","onChange"]);if(o){let a=m(o,n);return s&&s(a.value),u.createElement(r,p(p({},a),t))}return u.createElement(r,p({},t))}}var er=g.Provider;function or(s){var t=s,{children:r,onSubmit:e,value:o}=t,n=v(t,["children","onSubmit","value"]);return u.createElement(er,{value:o},u.createElement("form",p({onSubmit:i=>{i.preventDefault(),e&&e(i)}},n),r))}var Y=require("react"),M=require("react-ob");var tr={names:[],values:{},errors:{},onChange:(r,e)=>{},keepValues:r=>{}};function D(r,e,o){if(!r)return tr;(0,M.useObserver)(r,t=>{let i=[];return o?o=="error"?(e.forEach(f=>{i.push(r.errors[f])}),i):(e.forEach(f=>{i.push(t[f])}),i):(e.forEach(f=>{i.push(t[f]),i.push(r.errors[f])}),i)});let n={},s={};return e.forEach(t=>{n[t]=r.val[t],s[t]=r.errors[t]||""}),{names:e,values:n,errors:s,onChange:(t,i)=>{r.val[t]=i,r.next()},keepValues:r.keepValues}}function nr(r,e){let o=(0,Y.useContext)(g);return D(o,r,e)}var x=require("react"),N=require("react-ob");function sr({initialValues:r,initErrors:e,validate:o,validateSchema:n,handleChange:s}){let t=(0,x.useRef)((0,N.CreateObserver)(r));return(0,x.useMemo)(()=>{let i=Object.keys(r),f={};return i.forEach(a=>{f[a]=!1}),t.current=L(p({},t.current),{validate:o,errors:e||{},fields:i,touched:f,validateSchema:n,findFirstError:()=>{let a=t.current.validateSchema;if(a.isSoke)return a.firstError(t.current.errors);let d=t.current.fields,l="";return d.forEach(c=>{!l&&t.current.errors[c]&&(l=t.current.errors[c])}),l},validateAll:()=>y(this,null,function*(){let a=t.current.validateSchema;return a.isSoke?a.schemaKeys.forEach(d=>{t.current.touched[d]=!0}):t.current.fields.forEach(l=>{t.current.touched[l]=!0}),yield h(t.current),t.current.findFirstError()}),validateKey:a=>y(this,null,function*(){return t.current.touched[a]=!0,yield h(t.current,a),t.current.errors[a]}),keepValues:a=>{let d=a||t.current.fields,l={};return d.forEach(c=>{l[c]=t.current.val[c]}),l},handleChange:s}),t.current},[])}module.exports=W(ar);
