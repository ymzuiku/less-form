var K=Object.create;var g=Object.defineProperty,q=Object.defineProperties,z=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var E=(e,r,o)=>r in e?g(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,d=(e,r)=>{for(var o in r||(r={}))O.call(r,o)&&E(e,o,r[o]);if(C)for(var o of C(r))L.call(r,o)&&E(e,o,r[o]);return e},h=(e,r)=>q(e,G(r));var T=(e,r)=>{var o={};for(var t in e)O.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&C)for(var t of C(e))r.indexOf(t)<0&&L.call(e,t)&&(o[t]=e[t]);return o};var Q=(e,r)=>{for(var o in r)g(e,o,{get:r[o],enumerable:!0})},N=(e,r,o,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of I(r))!O.call(e,i)&&i!==o&&g(e,i,{get:()=>r[i],enumerable:!(t=z(r,i))||t.enumerable});return e};var U=(e,r,o)=>(o=e!=null?K(J(e)):{},N(r||!e||!e.__esModule?g(o,"default",{value:e,enumerable:!0}):o,e)),W=e=>N(g({},"__esModule",{value:!0}),e);var v=(e,r,o)=>new Promise((t,i)=>{var a=s=>{try{f(o.next(s))}catch(p){i(p)}},n=s=>{try{f(o.throw(s))}catch(p){i(p)}},f=s=>s.done?t(s.value):Promise.resolve(s.value).then(a,n);f((o=o.apply(e,r)).next())});var ne={};Q(ne,{ErrorMessage:()=>Z,Field:()=>$,FieldHOC:()=>ee,LessForm:()=>oe,useField:()=>m,useFieldByContext:()=>Y,useForm:()=>te});module.exports=W(ne);var l=U(require("react"));var F=require("react"),H=require("react-ob");function c(e,r){if(typeof r!="string")return;let o=r.split("."),t=e,i=o.length;try{for(let a=0;a<i;a++){let n=o[a];if(a<i-1)if(Array.isArray(t))if(/=/.test(n)){let[f,s]=n.split("=");t=t.find(p=>p[f]==s)}else isNaN(Number(n))||(t=t[Number(n)]);else t=t[n];else return t[n]}}catch(a){return}}function j(e,r,o){if(typeof r!="string")return;let t=r.split("."),i=e,a=t.length;try{for(let n=0;n<a;n++){let f=t[n];if(n<a-1)if(Array.isArray(i))if(/=/.test(f)){let[s,p]=f.split("=");i=i.find(u=>u[s]==p)}else isNaN(Number(f))||(i=i[Number(f)]);else i=i[f];else i[f]=o}}catch(n){}}var A=require("react"),x=(0,A.createContext)(void 0);var R={abortEarly:!1};function V(e){return!!e._blacklist}function w(a,n){return v(this,arguments,function*(e,r,{key:o,first:t,typeChange:i}={}){let f="",s="",p={};if(o)try{yield e.validateAt(o,r,R)}catch(u){u&&u.errors&&u.errors[0]&&(p[o]=u.errors[0],s=o,f=u.errors[0])}else{let u=Object.keys(r);try{yield e.isValid(r,R)}catch(y){p[y.path]=y.errors[0],s=y.path,f=y.errors[0]}}return{errors:p,error:f,path:s}})}function _(e,r){let o={};return Object.keys(e.touched).forEach(t=>{if(e.touched[t]){let i=r[t];i!==void 0&&(o[t]=i)}}),o}function B(o){return v(this,arguments,function*(e,r={}){if(e.validate){let t=yield Promise.resolve(e.validate(e.val,r.key));Object.assign(e.errors,_(e,t))}else if(e.validateSchema){let t=e.validateSchema,i;if(V(t)){let a={};Object.keys(t.fields).forEach(n=>{a[n]=c(e.val,n)}),i=yield w(t,a,h(d({},r),{typeChange:!0}))}else if(t.isSoke){let a={};t.schemaKeys.forEach(n=>{a[n]=c(e.val,n)}),i=t.validate(a,h(d({},r),{typeChange:!0})),console.log("__debug__",i)}r.key?e.errors[r.key]=i.error:e.errors=_(e,i.errors),i.error&&(e.error=i.error,e.errorPath=i.path)}e.next()})}var X={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function Y(e,r,o){if(!e)return X;let t=(0,H.useObserver)(e,n=>o?o=="error"?[e.errors[r]]:[c(n,r)]:[c(n,r),e.errors[r]]);(0,F.useEffect)(()=>{let n=c(t,r);n!==void 0&&a.onChange(n)},[]);let i=c(t,r),a={name:r,value:i==null?"":i,error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:n=>{n.persist&&n.persist()},onChange:n=>{if(!e.touched[r]&&!n)return;n&&!e.touched[r]&&(e.touched[r]=!0);let f=typeof n,s;if(f==="undefined")s="";else if(f==="object"&&(n.currentTarget||n.target)){let y=n.currentTarget||n.target,k=y.type;if(k==="checkbox"||k==="radio")s=!!y.checked;else if(y.multiple){let P=y.options,S=[];for(var p=0,u=P.length;p<u;p++)P[p].selected&&S.push(P[p].value);s=S}else s=y.value}else s=n;j(e.val,r,s),e.handleChange&&(e.val=e.handleChange(e.val,r)),B(e,{first:!0,key:r,typeChange:!1})}};return a}function m(e,r){let o=(0,F.useContext)(x);return Y(o,e,r)}function Z({name:e}){let r=m(e,"error");return l.createElement(l.Fragment,null,r.error)}function $({name:e,children:r,loadType:o}){let t=m(e,o);return r(t)}var M=require("react");function ee(e){return function(n){var f=n,{name:o,loadType:t,onChange:i}=f,a=T(f,["name","loadType","onChange"]);if(o){let s=m(o,t);return(0,M.useEffect)(()=>{i&&i(s.value)},[s.value]),l.createElement(e,d(d({},s),a))}return l.createElement(e,d({},a))}}var re=x.Provider;function oe(i){var a=i,{children:e,onSubmit:r,value:o}=a,t=T(a,["children","onSubmit","value"]);return l.createElement(re,{value:o},l.createElement("form",d({onSubmit:n=>{n.preventDefault(),r&&r(n)}},t),e))}var b=require("react"),D=require("react-ob");function te({initialValues:e,validate:r,validateSchema:o,handleChange:t}){let i=(0,b.useRef)((0,D.CreateObserver)(e));return(0,b.useMemo)(()=>{let a=Object.keys(e),n={};return a.forEach(f=>{n[f]=!1}),i.current=h(d({},i.current),{validate:r,errors:{},error:"",touched:n,validateSchema:o,handleChange:t}),i.current},[])}
