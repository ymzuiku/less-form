var G=Object.create;var h=Object.defineProperty,I=Object.defineProperties,J=Object.getOwnPropertyDescriptor,Q=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,W=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var A=(e,r,t)=>r in e?h(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,y=(e,r)=>{for(var t in r||(r={}))E.call(r,t)&&A(e,t,r[t]);if(v)for(var t of v(r))N.call(r,t)&&A(e,t,r[t]);return e},R=(e,r)=>I(e,Q(r));var F=(e,r)=>{var t={};for(var n in e)E.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&v)for(var n of v(e))r.indexOf(n)<0&&N.call(e,n)&&(t[n]=e[n]);return t};var X=(e,r)=>{for(var t in r)h(e,t,{get:r[t],enumerable:!0})},w=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of U(r))!E.call(e,i)&&i!==t&&h(e,i,{get:()=>r[i],enumerable:!(n=J(r,i))||n.enumerable});return e};var Z=(e,r,t)=>(t=e!=null?G(W(e)):{},w(r||!e||!e.__esModule?h(t,"default",{value:e,enumerable:!0}):t,e)),$=e=>w(h({},"__esModule",{value:!0}),e);var m=(e,r,t)=>new Promise((n,i)=>{var o=a=>{try{f(t.next(a))}catch(l){i(l)}},s=a=>{try{f(t.throw(a))}catch(l){i(l)}},f=a=>a.done?n(a.value):Promise.resolve(a.value).then(o,s);f((t=t.apply(e,r)).next())});var le={};X(le,{ErrorMessage:()=>re,Field:()=>te,FieldHOC:()=>oe,LessForm:()=>se,useField:()=>g,useFieldByContext:()=>Y,useFields:()=>ae,useFieldsByContext:()=>q,useForm:()=>fe});module.exports=$(le);var u=Z(require("react"));var k=require("react"),H=require("react-ob");function p(e,r){if(typeof r!="string")return;let t=r.split("."),n=e,i=t.length;try{for(let o=0;o<i;o++){let s=t[o];if(o<i-1)if(Array.isArray(n))if(/=/.test(s)){let[f,a]=s.split("=");n=n.find(l=>l[f]==a)}else isNaN(Number(s))||(n=n[Number(s)]);else n=n[s];else return n[s]}}catch(o){return}}function x(e,r,t){if(typeof r!="string")return;let n=r.split("."),i=e,o=n.length;try{for(let s=0;s<o;s++){let f=n[s];if(s<o-1)if(Array.isArray(i))if(/=/.test(f)){let[a,l]=f.split("=");i=i.find(c=>c[a]==l)}else isNaN(Number(f))||(i=i[Number(f)]);else i=i[f];else i[f]=t}}catch(s){}}var j=require("react"),T=(0,j.createContext)(void 0);var V={abortEarly:!1};function B(e){return!!e._blacklist}function K(e,r,t){return m(this,null,function*(){let n={};if(t)try{yield e.validateAt(t,r,V)}catch(i){i&&i.errors&&i.errors[0]&&(n[t]=i.errors[0])}else{let i=Object.keys(r);for(let o of i)try{yield e.validateAt(o,r,V)}catch(s){s&&s.errors&&s.errors[0]&&(n[o]=s.errors[0])}}return n})}function S(e,r){let t={};return Object.keys(e.touched).forEach(n=>{if(e.touched[n]){let i=r[n];i!==void 0&&(t[n]=i)}}),t}function C(e,r){return m(this,null,function*(){if(e.validate){let t=yield Promise.resolve(e.validate(e.val,r));Object.assign(e.errors,S(e,t))}else if(e.validateSchema){let t=e.validateSchema;if(B(t)){let n=yield K(t,e.val,r);Object.assign(e.errors,S(e,n))}else if(t.isSoke){let n={};t.schemaKeys.forEach(o=>{n[o]=p(e.val,o)});let i=t.validate(n,r);Object.assign(e.errors,S(e,i))}}e.next()})}var ee={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function Y(e,r,t){if(!e)return ee;let n=(0,H.useObserver)(e,s=>t?t=="error"?[e.errors[r]]:[p(s,r)]:[p(s,r),e.errors[r]]);(0,k.useEffect)(()=>{let s=p(n,r);s!==void 0&&o.onChange(s)},[]);let i=p(n,r),o={name:r,value:i==null?"":i,error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:s=>{s.persist&&s.persist()},onChange:s=>{s&&!e.touched[r]&&(e.touched[r]=!0);let f=typeof s,a;if(f==="undefined")a="";else if(f==="object"&&(s.currentTarget||s.target)){let d=s.currentTarget||s.target,O=d.type;if(O==="checkbox"||O==="radio")a=!!d.checked;else if(d.multiple){let P=d.options,L=[];for(var l=0,c=P.length;l<c;l++)P[l].selected&&L.push(P[l].value);a=L}else a=d.value}else a=s;x(e.val,r,a),e.handleChange&&(e.val=e.handleChange(e.val,r)),C(e,r)}};return o}function g(e,r){let t=(0,k.useContext)(T);return Y(t,e,r)}function re({name:e}){let r=g(e,"error");return u.createElement(u.Fragment,null,r.error)}function te({name:e,children:r,loadType:t}){let n=g(e,t);return r(n)}var M=require("react");function oe(e){return function(s){var f=s,{name:t,loadType:n,onChange:i}=f,o=F(f,["name","loadType","onChange"]);if(t){let a=g(t,n);return(0,M.useEffect)(()=>{i&&i(a.value)},[a.value]),u.createElement(e,y(y({},a),o))}return u.createElement(e,y({},o))}}var ne=T.Provider;function se(i){var o=i,{children:e,onSubmit:r,value:t}=o,n=F(o,["children","onSubmit","value"]);return u.createElement(ne,{value:t},u.createElement("form",y({onSubmit:s=>{s.preventDefault(),r&&r(s)}},n),e))}var D=require("react"),_=require("react-ob");var ie={names:[],values:{},errors:{},onChange:(e,r)=>{},keepValues:e=>{}};function q(e,r,t){if(!e)return ie;(0,_.useObserver)(e,o=>{let s=[];return t?t=="error"?(r.forEach(f=>{s.push(e.errors[f])}),s):(r.forEach(f=>{s.push(o[f])}),s):(r.forEach(f=>{s.push(o[f]),s.push(e.errors[f])}),s)});let n={},i={};return r.forEach(o=>{n[o]=p(e.val,o),i[o]=e.errors[o]||""}),{names:r,values:n,errors:i,onChange:(o,s)=>{x(e.val,o,s),e.next()},keepValues:e.keepValues}}function ae(e,r){let t=(0,D.useContext)(T);return q(t,e,r)}var b=require("react"),z=require("react-ob");function fe({initialValues:e,initErrors:r,validate:t,validateSchema:n,handleChange:i}){let o=(0,b.useRef)((0,z.CreateObserver)(e));return(0,b.useMemo)(()=>{let s=Object.keys(e),f={};return s.forEach(a=>{f[a]=!1}),o.current=R(y({},o.current),{validate:t,errors:r||{},fields:s,touched:f,validateSchema:n,findFirstError:()=>{let a=o.current.validateSchema;if(a.isSoke)return a.firstError(o.current.errors);let l=o.current.fields,c="";return l.forEach(d=>{!c&&o.current.errors[d]&&(c=o.current.errors[d])}),c},validateAll:()=>m(this,null,function*(){let a=o.current.validateSchema;return a.isSoke?a.schemaKeys.forEach(l=>{o.current.touched[l]=!0}):o.current.fields.forEach(c=>{o.current.touched[c]=!0}),yield C(o.current),o.current.findFirstError()}),validateKey:a=>m(this,null,function*(){return o.current.touched[a]=!0,yield C(o.current,a),o.current.errors[a]}),keepValues:a=>{let l=a||o.current.fields,c={};return l.forEach(d=>{c[d]=o.current.val[d]}),c},handleChange:i}),o.current},[])}
