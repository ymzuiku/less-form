var f=Object.defineProperty,R=Object.defineProperties,E=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var h=(e,r,o)=>r in e?f(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,s=(e,r)=>{for(var o in r||(r={}))m.call(r,o)&&h(e,o,r[o]);if(l)for(var o of l(r))C.call(r,o)&&h(e,o,r[o]);return e},v=(e,r)=>R(e,O(r)),M=e=>f(e,"__esModule",{value:!0});var g=(e,r)=>{var o={};for(var t in e)m.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&l)for(var t of l(e))r.indexOf(t)<0&&C.call(e,t)&&(o[t]=e[t]);return o};var L=(e,r)=>{for(var o in r)f(e,o,{get:r[o],enumerable:!0})},V=(e,r,o,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of A(r))!m.call(e,n)&&(o||n!=="default")&&f(e,n,{get:()=>r[n],enumerable:!(t=E(r,n))||t.enumerable});return e};var j=(e=>(r,o)=>e&&e.get(r)||(o=V(M({}),r,1),e&&e.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var N={};L(N,{ErrorMessage:()=>D,Field:()=>Y,FormProvider:()=>H,useField:()=>u,useFieldByContext:()=>P,useForm:()=>I,validateYupSchema:()=>y});var p=require("react"),S=require("react-ob");var x=require("react"),c=(0,x.createContext)(void 0);function y(e,r){let o={},t={abortEarly:!1};return Object.keys(r).forEach(n=>{try{e.validateSyncAt(n,r,t)}catch(i){i&&i.errors&&i.errors[0]&&(o[n]=i.errors[0])}}),o}function F(e,r){if(e.entryCheckAll)return r;let o={};return Object.keys(e.touched).forEach(t=>{e.touched[t]&&(o[t]=r[t])}),o}function d(e){e.validate?Promise.resolve(e.validate(e.val)).then(r=>{e.errors=F(e,r),e.next()}):(e.validateSchema&&(e.errors=F(e,y(e.validateSchema,e.val))),e.next())}var B={value:"",error:"",setTouched:()=>{},setValue:()=>{}};function P(e,r,o){if(!e)return B;let t=(0,S.useObserver)(e,i=>o?o=="value"?[i[r]]:[e.errors[r]]:[i[r],e.errors[r]]);(0,p.useEffect)(()=>{e.val[r]&&n.setTouched()},[]);let n={value:t[r],error:typeof e.errors[r]=="undefined"?"":e.errors[r],setTouched:()=>{e.touched[r]||(e.touched[r]=!0,n.setValue(t[r]))},setValue:i=>{e.val[r]=i,d(e)}};return n}function u(e,r){let o=(0,p.useContext)(c);return P(o,e,r)}function D({name:e}){let r=u(e,"error");return React.createElement(React.Fragment,null,r.error)}function Y(o){var t=o,{name:e}=t,r=g(t,["name"]);let n=u(e);return React.createElement("input",s({name:e,onChange:i=>{n.setValue(i.currentTarget.value)},onBlur:n.setTouched},r))}var w=c.Provider;function H(e){return React.createElement(w,s({},e))}var a=require("react"),k=require("react-ob");function I({initialValues:e,initErrors:r,validate:o,entryCheckAll:t,validateSchema:n}){let i=(0,a.useRef)((0,k.CreateObserver)(e));return(0,a.useEffect)(()=>{t&&d(i.current)},[]),(0,a.useMemo)(()=>{let T={};return Object.keys(e).forEach(b=>{T[b]=!1}),i.current=v(s({},i.current),{validate:o,errors:r||{},touched:T,entryCheckAll:!!t,validateSchema:n}),i.current},[])}module.exports=j(N);
