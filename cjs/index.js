var I=Object.create;var d=Object.defineProperty,N=Object.defineProperties,Y=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,z=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var k=(e,r,o)=>r in e?d(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,l=(e,r)=>{for(var o in r||(r={}))v.call(r,o)&&k(e,o,r[o]);if(m)for(var o of m(r))b.call(r,o)&&k(e,o,r[o]);return e},E=(e,r)=>N(e,D(r)),R=e=>d(e,"__esModule",{value:!0});var L=(e,r)=>{var o={};for(var t in e)v.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&m)for(var t of m(e))r.indexOf(t)<0&&b.call(e,t)&&(o[t]=e[t]);return o};var G=(e,r)=>{for(var o in r)d(e,o,{get:r[o],enumerable:!0})},M=(e,r,o,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of q(r))!v.call(e,n)&&(o||n!=="default")&&d(e,n,{get:()=>r[n],enumerable:!(t=Y(r,n))||t.enumerable});return e},J=(e,r)=>M(R(d(e!=null?I(z(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),K=(e=>(r,o)=>e&&e.get(r)||(o=M(R({}),r,1),e&&e.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var g=(e,r,o)=>new Promise((t,n)=>{var i=f=>{try{a(o.next(f))}catch(c){n(c)}},s=f=>{try{a(o.throw(f))}catch(c){n(c)}},a=f=>f.done?t(f.value):Promise.resolve(f.value).then(i,s);a((o=o.apply(e,r)).next())});var _={};G(_,{ErrorMessage:()=>U,Field:()=>V,FormProvider:()=>X,useField:()=>y,useFieldByContext:()=>w,useForm:()=>Z,validateYupSchema:()=>F});var u=J(require("react"));var h=require("react"),j=require("react-ob");var O=require("react"),C=(0,O.createContext)(void 0);var A={abortEarly:!1};function F(e,r,o){return g(this,null,function*(){console.time("yup");let t={};if(o)try{yield e.validateAt(o,r,A)}catch(n){n&&n.errors&&n.errors[0]&&(t[o]=n.errors[0])}else{let n=Object.keys(r);for(let i of n)try{yield e.validateAt(i,r,A)}catch(s){s&&s.errors&&s.errors[0]&&(t[i]=s.errors[0])}}return console.timeEnd("yup"),t})}function B(e,r){if(e.entryCheckAll)return r;let o={};return Object.keys(e.touched).forEach(t=>{e.touched[t]&&(o[t]=r[t])}),o}function T(e,r){return g(this,null,function*(){if(e.validate){let o=yield Promise.resolve(e.validate(e.val,r));e.errors=B(e,o),e.next()}else if(e.validateSchema){let o=yield F(e.validateSchema,e.val,r);e.errors=B(e,o),e.next()}else e.next()})}var Q={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function w(e,r,o){if(!e)return Q;let t=(0,j.useObserver)(e,i=>o?o=="error"?[e.errors[r]]:[i[r]]:[i[r],e.errors[r]]);(0,h.useEffect)(()=>{e.val[r]&&n.onChange(e.val[r])},[]);let n={name:r,value:t[r]==null?"":t[r],error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:i=>{i.persist&&i.persist(),e.touched[r]||(e.touched[r]=!0,n.onChange(t[r]))},onChange:i=>{e.touched[r]||(e.touched[r]=!0);let s=typeof i,a;if(s==="undefined")a="";else if(s==="object"&&i.currentTarget){let P=i.currentTarget.type;if(P==="checkbox"||P==="checkbox")a=!!i.currentTarget.checked;else if(i.currentTarget.multiple){let x=i.currentTarget.options,S=[];for(var f=0,c=x.length;f<c;f++)x[f].selected&&S.push(x[f].value);a=S}else a=i.currentTarget.value}else a=i;e.handleChange&&(a=e.handleChange(r,a)),e.val[r]=a,T(e,r)}};return n}function y(e,r){let o=(0,h.useContext)(C);return w(o,e,r)}function U({name:e}){let r=y(e,"error");return u.createElement(u.Fragment,null,r.error)}function V(o){var t=o,{name:e}=t,r=L(t,["name"]);let n=y(e);return u.createElement("input",l({name:e,value:n.value,onChange:n.onChange,onBlur:n.onBlur},r))}var W=C.Provider;function X(e){return u.createElement(W,l({},e))}var p=require("react"),H=require("react-ob");function Z({initialValues:e,initErrors:r,validate:o,entryCheckAll:t,validateSchema:n,handleChange:i}){let s=(0,p.useRef)((0,H.CreateObserver)(e));return(0,p.useEffect)(()=>{t&&T(s.current)},[]),(0,p.useMemo)(()=>{let a={};return Object.keys(e).forEach(f=>{a[f]=!1}),s.current=E(l({},s.current),{validate:o,errors:r||{},touched:a,entryCheckAll:!!t,validateSchema:n,handleChange:i}),s.current},[])}module.exports=K(_);
