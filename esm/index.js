var b=Object.defineProperty,E=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var v=(e,r,o)=>r in e?b(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,u=(e,r)=>{for(var o in r||(r={}))C.call(r,o)&&v(e,o,r[o]);if(c)for(var o of c(r))T.call(r,o)&&v(e,o,r[o]);return e},x=(e,r)=>E(e,R(r));var F=(e,r)=>{var o={};for(var t in e)C.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&c)for(var t of c(e))r.indexOf(t)<0&&T.call(e,t)&&(o[t]=e[t]);return o};import*as i from"react";import{useContext as M,useEffect as O}from"react";import{useObserver as A}from"react-ob";import{createContext as L}from"react";var d=L(void 0);function S(e,r){let o={},t={abortEarly:!1};return Object.keys(r).forEach(s=>{try{e.validateSyncAt(s,r,t)}catch(n){n&&n.errors&&n.errors[0]&&(o[s]=n.errors[0])}}),o}function k(e,r){if(e.entryCheckAll)return r;let o={};return Object.keys(e.touched).forEach(t=>{e.touched[t]&&(o[t]=r[t])}),o}function f(e){e.validate?Promise.resolve(e.validate(e.val)).then(r=>{e.errors=k(e,r),e.next()}):(e.validateSchema&&(e.errors=k(e,S(e.validateSchema,e.val))),e.next())}var B={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function j(e,r,o){if(!e)return B;let t=A(e,n=>o?o=="value"?[n[r]]:[e.errors[r]]:[n[r],e.errors[r]]);O(()=>{e.val[r]&&s.onChange(e.val[r])},[]);let s={name:r,value:t[r],error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:n=>{n.persist&&n.persist(),e.touched[r]||(e.touched[r]=!0,s.onChange(t[r]))},onChange:n=>{let l=typeof n,a;if(l==="object"&&n.currentTarget){let g=n.currentTarget.type;if(g==="checkbox"||g==="checkbox")a=!!n.currentTarget.checked;else if(n.currentTarget.multiple){let y=n.currentTarget.options,h=[];for(var p=0,P=y.length;p<P;p++)y[p].selected&&h.push(y[p].value);a=h}else a=n.currentTarget.value;e.val[r]=a,f(e)}else e.val[r]=n,f(e)}};return s}function m(e,r){let o=M(d);return j(o,e,r)}function $({name:e}){let r=m(e,"error");return i.createElement(i.Fragment,null,r.error)}function oe(o){var t=o,{name:e}=t,r=F(t,["name"]);let s=m(e);return i.createElement("input",u({name:e,value:s.value||"",onChange:s.onChange,onBlur:s.onBlur},r))}var H=d.Provider;function ie(e){return i.createElement(H,u({},e))}import{useEffect as I,useMemo as Y,useRef as D}from"react";import{CreateObserver as N}from"react-ob";function pe({initialValues:e,initErrors:r,validate:o,entryCheckAll:t,validateSchema:s}){let n=D(N(e));return I(()=>{t&&f(n.current)},[]),Y(()=>{let l={};return Object.keys(e).forEach(a=>{l[a]=!1}),n.current=x(u({},n.current),{validate:o,errors:r||{},touched:l,entryCheckAll:!!t,validateSchema:s}),n.current},[])}export{$ as ErrorMessage,oe as Field,ie as FormProvider,m as useField,j as useFieldByContext,pe as useForm,S as validateYupSchema};
