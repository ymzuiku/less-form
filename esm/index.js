var g=Object.defineProperty,x=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var m=(e,r,o)=>r in e?g(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,s=(e,r)=>{for(var o in r||(r={}))d.call(r,o)&&m(e,o,r[o]);if(a)for(var o of a(r))p.call(r,o)&&m(e,o,r[o]);return e},y=(e,r)=>x(e,F(r));var T=(e,r)=>{var o={};for(var t in e)d.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&a)for(var t of a(e))r.indexOf(t)<0&&p.call(e,t)&&(o[t]=e[t]);return o};import{useContext as P,useEffect as k}from"react";import{useObserver as b}from"react-ob";import{createContext as S}from"react";var u=S(void 0);function C(e,r){let o={},t={abortEarly:!1};return Object.keys(r).forEach(i=>{try{e.validateSyncAt(i,r,t)}catch(n){n&&n.errors&&n.errors[0]&&(o[i]=n.errors[0])}}),o}function h(e,r){if(e.entryCheckAll)return r;let o={};return Object.keys(e.touched).forEach(t=>{e.touched[t]&&(o[t]=r[t])}),o}function f(e){e.validate?Promise.resolve(e.validate(e.val)).then(r=>{e.errors=h(e,r),e.next()}):(e.validateSchema&&(e.errors=h(e,C(e.validateSchema,e.val))),e.next())}var R={value:"",error:"",setTouched:()=>{},setValue:()=>{}};function E(e,r,o){if(!e)return R;let t=b(e,n=>o?o=="value"?[n[r]]:[e.errors[r]]:[n[r],e.errors[r]]);k(()=>{e.val[r]&&i.setTouched()},[]);let i={value:t[r],error:typeof e.errors[r]=="undefined"?"":e.errors[r],setTouched:()=>{e.touched[r]||(e.touched[r]=!0,i.setValue(t[r]))},setValue:n=>{e.val[r]=n,f(e)}};return i}function l(e,r){let o=P(u);return E(o,e,r)}function K({name:e}){let r=l(e,"error");return React.createElement(React.Fragment,null,r.error)}function W(o){var t=o,{name:e}=t,r=T(t,["name"]);let i=l(e);return React.createElement("input",s({name:e,onChange:n=>{i.setValue(n.currentTarget.value)},onBlur:i.setTouched},r))}var O=u.Provider;function _(e){return React.createElement(O,s({},e))}import{useEffect as A,useMemo as M,useRef as L}from"react";import{CreateObserver as V}from"react-ob";function ne({initialValues:e,initErrors:r,validate:o,entryCheckAll:t,validateSchema:i}){let n=L(V(e));return A(()=>{t&&f(n.current)},[]),M(()=>{let c={};return Object.keys(e).forEach(v=>{c[v]=!1}),n.current=y(s({},n.current),{validate:o,errors:r||{},touched:c,entryCheckAll:!!t,validateSchema:i}),n.current},[])}export{K as ErrorMessage,W as Field,_ as FormProvider,l as useField,E as useFieldByContext,ne as useForm,C as validateYupSchema};
